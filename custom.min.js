const _0x17635f=_0x41e6;(function(_0x4d54f5,_0xc5da99){const _0x495d0d=_0x41e6,_0xf92f24=_0x4d54f5();while(!![]){try{const _0x30dd30=parseInt(_0x495d0d(0x102))/0x1*(-parseInt(_0x495d0d(0x159))/0x2)+parseInt(_0x495d0d(0x12f))/0x3+-parseInt(_0x495d0d(0x134))/0x4+parseInt(_0x495d0d(0x151))/0x5+parseInt(_0x495d0d(0x123))/0x6+-parseInt(_0x495d0d(0x15a))/0x7+-parseInt(_0x495d0d(0x13e))/0x8*(-parseInt(_0x495d0d(0x153))/0x9);if(_0x30dd30===_0xc5da99)break;else _0xf92f24['push'](_0xf92f24['shift']());}catch(_0x428a27){_0xf92f24['push'](_0xf92f24['shift']());}}}(_0x1341,0xe7d4d));const genobank=new GenoBankLogin();genobank[_0x17635f(0x147)]();let prevButtons={};function startLoadingButton(_0x44be45){const _0x2a94cd=_0x17635f;$('#'+_0x44be45)[_0x2a94cd(0x13c)](_0x2a94cd(0x14b),!0x0),prevButtons[_0x44be45]={'prevContent':$('#'+_0x44be45)[_0x2a94cd(0x11d)]()},$('#'+_0x44be45)[_0x2a94cd(0x11d)](_0x2a94cd(0x133));}function stopLoadingButton(_0x5f5b7f){const _0xe795ed=_0x17635f;$('#'+_0x5f5b7f)[_0xe795ed(0x13c)](_0xe795ed(0x14b),!0x1),$('#'+_0x5f5b7f)[_0xe795ed(0x11d)](prevButtons[_0x5f5b7f]?.[_0xe795ed(0x14e)]);}function showErrorToast(_0x1b2335){const _0x5a0b00=_0x17635f;$(_0x5a0b00(0x10a))[_0x5a0b00(0x129)](_0x1b2335);let _0x5c83f1=$(_0x5a0b00(0x11b));new bootstrap[(_0x5a0b00(0x158))](_0x5c83f1)[_0x5a0b00(0x142)]();}function magicConstructor(){const _0x1526f7=_0x17635f;return new Magic(window[_0x1526f7(0x12b)],{'extensions':[new MagicOAuthExtension()],'network':{'rpcUrl':window['RPC_NETWORK'],'chainId':window[_0x1526f7(0x156)]}});}async function loginUsingMetamask(){const _0x138167=_0x17635f;startLoadingButton(_0x138167(0x131));try{const _0x38024a=$(_0x138167(0x13a));if(void 0x0===window[_0x138167(0x107)])return showErrorToast(_0x138167(0x15e)),void _0x38024a[_0x138167(0x160)]();let _0x51955d=new ethers[(_0x138167(0x106))][(_0x138167(0x110))](window['ethereum']);const _0x1c6f86=await metamaskLogin(_0x51955d,window[_0x138167(0x155)]);await finishingLoginProcess(_0x1c6f86);}catch(_0x1b1a5b){stopLoadingButton(_0x138167(0x131)),showErrorToast(_0x138167(0x150)+_0x1b1a5b[_0x138167(0x136)]);}}async function metamaskLogin(_0xd20c7,_0x56ed71){const _0x41cfe7=_0x17635f;await window['ethereum'][_0x41cfe7(0x15d)]({'method':_0x41cfe7(0x15f)});let _0x51dd68=await _0xd20c7[_0x41cfe7(0x11e)]()[_0x41cfe7(0x13b)](_0x56ed71),_0x431e71=await _0xd20c7[_0x41cfe7(0x11e)]()[_0x41cfe7(0x149)]();return{'userSignature':_0x51dd68,'userWallet':_0x431e71,'isPermittee':!!await genobank[_0x41cfe7(0x114)](_0x431e71),'loginMethod':_0x41cfe7(0x148)};}async function loginUsingGoogle(){const _0x576aa3=_0x17635f;startLoadingButton('id-google-button');try{let _0x1d0d5f=magicConstructor();await _0x1d0d5f[_0x576aa3(0x13d)][_0x576aa3(0x146)]({'provider':_0x576aa3(0x10b),'redirectURI':window[_0x576aa3(0x13f)][_0x576aa3(0x138)]+'//'+getCurrentDomainWithPort()+_0x576aa3(0x14a)});}catch(_0x539cb0){stopLoadingButton('id-google-button'),showErrorToast('Error:\x20'+_0x539cb0[_0x576aa3(0x136)]);}}async function handleOAuthResult(){const _0x68e280=_0x17635f;try{let _0x57225a=magicConstructor();$(_0x68e280(0x103))[_0x68e280(0x11d)](_0x68e280(0x152));const _0x4b38ce=await _0x57225a['oauth'][_0x68e280(0x112)]();let _0x1d0a5c=await genobank[_0x68e280(0x114)](_0x4b38ce?.[_0x68e280(0x15b)]?.[_0x68e280(0x120)]?.[_0x68e280(0x161)]);$(_0x68e280(0x103))[_0x68e280(0x11d)](_0x68e280(0x157));const _0x32b24c={'userSignature':await signAndVerify(MESSAGE_TO_SIGN,_0x4b38ce?.[_0x68e280(0x15b)]?.[_0x68e280(0x120)]?.[_0x68e280(0x161)]),'userWallet':_0x4b38ce?.['magic']?.['userMetadata']?.[_0x68e280(0x161)],'isPermittee':_0x1d0a5c,'loginMethod':_0x68e280(0x15b),'magicToken':_0x4b38ce?.[_0x68e280(0x15b)]?.[_0x68e280(0x12a)],'email':_0x4b38ce?.[_0x68e280(0x13d)]?.[_0x68e280(0x132)]?.[_0x68e280(0x12d)],'name':_0x4b38ce?.[_0x68e280(0x13d)]?.['userInfo']?.[_0x68e280(0x141)],'picture':_0x4b38ce?.['oauth']?.[_0x68e280(0x132)]?.[_0x68e280(0x139)]};$(_0x68e280(0x103))[_0x68e280(0x11d)](_0x68e280(0x14f)),await finishingLoginProcess(_0x32b24c);}catch(_0x1387fb){console[_0x68e280(0x143)](_0x1387fb);}}async function loginUsingEmailHandler(){const _0xe6f2c1=_0x17635f;startLoadingButton('id-email-button');try{const _0x450450=$(_0xe6f2c1(0x11c))[_0xe6f2c1(0x14c)]();await loginUsingEmail(_0x450450);}catch(_0x2dff95){console['error'](_0xe6f2c1(0x105),_0x2dff95),showErrorToast(_0xe6f2c1(0x150)+_0x2dff95[_0xe6f2c1(0x136)]);}finally{stopLoadingButton(_0xe6f2c1(0x111));}}async function loginUsingEmail(_0x1bcf82){const _0x594b0f=_0x17635f;try{const _0x412b66=magicConstructor(),_0x7796a7=await _0x412b66[_0x594b0f(0x140)][_0x594b0f(0x137)]({'email':_0x1bcf82}),_0x477f17=await _0x412b66[_0x594b0f(0x126)][_0x594b0f(0x10f)]();let _0x23c4ef=await genobank[_0x594b0f(0x114)](_0x7796a7?.[_0x594b0f(0x15b)]?.[_0x594b0f(0x120)]?.[_0x594b0f(0x161)]);const _0xe89b83={'userSignature':await signAndVerify(window['MESSAGE_TO_SIGN'],_0x477f17?.['publicAddress']),'userWallet':_0x477f17?.[_0x594b0f(0x161)],'isPermittee':!!_0x23c4ef,'loginMethod':_0x594b0f(0x104),'magicToken':_0x7796a7,'email':_0x477f17?.['email']};await finishingLoginProcess(_0xe89b83);}catch(_0x6e945e){console[_0x594b0f(0x143)](_0x6e945e);}}async function signAndVerify(_0xa41379,_0x317f4b){const _0x36648e=_0x17635f;try{if(!_0x317f4b)throw new Error(_0x36648e(0x10e));const _0x453c6e=magicConstructor(),_0x1f203d=new Web3(_0x453c6e['rpcProvider']);if(!await _0x453c6e[_0x36648e(0x126)][_0x36648e(0x113)]())throw new Error(_0x36648e(0x108));return await _0x1f203d['eth']['personal'][_0x36648e(0x127)](_0xa41379,_0x317f4b,'');}catch(_0xac48ec){console[_0x36648e(0x143)](_0x36648e(0x11a),_0xac48ec);}}async function finishingLoginProcess(_0x56a362){const _0x34b30a=_0x17635f,_0x29ae64=getConfig();if(console[_0x34b30a(0x130)](_0x29ae64),_0x29ae64['isPopup'])sendToParent(_0x29ae64?.['source'],_0x56a362);else{const _0x384aa3=await generateAuthJWT(_0x56a362);window['location'][_0x34b30a(0x116)]=_0x29ae64?.[_0x34b30a(0x109)]+'?data='+btoa(_0x384aa3?.[_0x34b30a(0x144)]);}}function sendToParent(_0x388acc,_0xbb1665){const _0x3b0056=_0x17635f,_0x187552={'genobankLogin':_0xbb1665};window[_0x3b0056(0x145)]['postMessage'](_0x187552,_0x388acc),window[_0x3b0056(0x10d)]();}function _0x1341(){const _0x261704=['addEventListener','1215543XVCtPG','log','id-metamask-button','userInfo','\x20\x0a\x09\x09<span\x20class=\x22spinner-grow\x20spinner-grow-sm\x22\x20aria-hidden=\x22true\x22></span>\x0a\x09\x09<span\x20role=\x22status\x22\x20class=\x22h6\x22\x20>Loading...</span>\x0a\x20\x20\x09','2159184eKOyte','DOMContentLoaded','message','loginWithMagicLink','protocol','picture','#metamaskLoginSpiner','signMessage','attr','oauth','362888FyolxL','location','auth','name','show','error','jwt','opener','loginWithRedirect','init','metamask','getAddress','/oauth-callback.html','disabled','val','setItem','prevContent','Finishing...','Error:\x20','1584115TWYDtg','Getting\x20user\x20data...','486NEscUv','getItem','MESSAGE_TO_SIGN','CHAIN_ID','Generating\x20signature...','Toast','788264sojLpB','10103044ARzrWn','magic','json','request','MetaMask\x20is\x20not\x20detected.\x20Please\x20install\x20MetaMask\x20and\x20try\x20again.','eth_requestAccounts','hide','publicAddress','4ELnuQt','#id-oauth-loading-text','magic_email','Error\x20in\x20loginUsingEmailHandler:','providers','ethereum','User\x20is\x20not\x20logged\x20in\x20with\x20Magic.','source','.toast\x20.toast-body','google','pathname','close','No\x20account\x20found\x20in\x20localStorage.','getInfo','Web3Provider','id-email-button','getRedirectResult','isLoggedIn','getValidatePermittee','443','href','port','stringify','Error:','Error\x20signing\x20the\x20message:','.toast','#emailInput','html','getSigner','https://genobank.app/generate_jwt','userMetadata','application/json','replace','8026194TUwNxd','search','POST','user','sign','finishingLoginProcess','text','idToken','MAGIC_API_KEY','data','email'];_0x1341=function(){return _0x261704;};return _0x1341();}async function generateAuthJWT(_0x3aed2b){const _0x4c4aa5=_0x17635f,_0x5414a0=new URL(_0x4c4aa5(0x11f));return fetch(_0x5414a0,{'method':_0x4c4aa5(0x125),'headers':{'Content-Type':_0x4c4aa5(0x121)},'body':JSON[_0x4c4aa5(0x118)](_0x3aed2b)})['then'](_0x39adb=>_0x39adb[_0x4c4aa5(0x15c)]())['catch'](_0x379395=>console[_0x4c4aa5(0x143)](_0x4c4aa5(0x119),_0x379395));}function getCurrentDomainWithPort(){const _0x2ffcdb=_0x17635f,_0x1bf30a=window[_0x2ffcdb(0x13f)];let _0x4e84ee=_0x1bf30a['hostname'];return _0x1bf30a[_0x2ffcdb(0x117)]&&'80'!==_0x1bf30a['port']&&_0x2ffcdb(0x115)!==_0x1bf30a[_0x2ffcdb(0x117)]&&(_0x4e84ee+=':'+_0x1bf30a[_0x2ffcdb(0x117)]),_0x4e84ee;}function saveConfig(_0x292c57){const _0x19f2ec=_0x17635f;sessionStorage[_0x19f2ec(0x14d)]('data',_0x292c57);}function getConfig(_0x3b4a9b=!0x1){const _0x5ea8b9=_0x17635f;decoded=atob(sessionStorage[_0x5ea8b9(0x154)](_0x5ea8b9(0x12c)))[_0x5ea8b9(0x122)](/'/g,'\x22');const _0x2eaa4c=JSON['parse'](decoded);return 0x0!=_0x3b4a9b?_0x2eaa4c[_0x3b4a9b]:_0x2eaa4c;}function _0x41e6(_0x56d086,_0x50137b){const _0x134174=_0x1341();return _0x41e6=function(_0x41e628,_0x5b2fc9){_0x41e628=_0x41e628-0x102;let _0x54b22d=_0x134174[_0x41e628];return _0x54b22d;},_0x41e6(_0x56d086,_0x50137b);}!(function(){const _0xea29eb=_0x17635f;try{const _0x5cfb23=new URLSearchParams(window[_0xea29eb(0x13f)][_0xea29eb(0x124)])['get'](_0xea29eb(0x12c));if(!_0x5cfb23)return void(_0xea29eb(0x14a)!=window[_0xea29eb(0x13f)][_0xea29eb(0x10c)]&&(window[_0xea29eb(0x13f)]['href']='https://genobank.io/'));saveConfig(_0x5cfb23);}catch(_0x2bf23f){}}()),document[_0x17635f(0x12e)](_0x17635f(0x135),function(){const _0x35a01e=_0x17635f;_0x35a01e(0x14a)===window[_0x35a01e(0x13f)][_0x35a01e(0x10c)]&&handleOAuthResult();}),window[_0x17635f(0x128)]=finishingLoginProcess;